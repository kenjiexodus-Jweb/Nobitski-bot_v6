const axios = require("axios");

module.exports = {
  config: {
    name: "fbcreate",
    aliases: ["createfb"],
    version: "1.5",
    author: "Jonnel",
    countDown: 5,
    role: 0,
    shortDescription: {
      en: "Create fake Facebook account"
    },
    longDescription: {
      en: "Generate a Facebook account using Haji Mix API with style"
    },
    category: "utility",
    guide: {
      en: "{pn}"
    }
  },

  execute: async function ({ api, event }) {
    const header = `
ğŸŸ¢âšªğŸ”´  ğŸ¤– ğ—™ğ—”ğ—ğ—˜ ğ—™ğ—”ğ—–ğ—˜ğ—•ğ—¢ğ—¢ğ— ğ—”ğ—–ğ—–ğ—¢ğ—¨ğ—¡ğ—§ ğ—•ğ—¬ ğ—ğ—¢ğ—¡ğ—¡ğ—˜ğ—Ÿ ğŸ¤–  ğŸŸ¢âšªğŸ”´
`;

    try {
      const url = "https://haji-mix-api.gleeze.com/api/fbcreate?amount=1&email=jonnelsoriano143%40gmail.com&api_key=8672951c715e5945e70b9da2663e3bbc2a3e7c678738a094057e3117c3a699ea";
      const res = await axios.get(url);

      const account = res.data?.data?.[0]?.account;

      if (!account) {
        console.log("âŒ API returned:", res.data);
        return api.sendMessage(header + "\nâŒ Failed to create Facebook account. Check API or response format.", event.threadID);
      }

      const msg = `
${header}

âœ… ğ—™ğ—®ğ—¸ğ—² ğ—”ğ—°ğ—°ğ—¼ğ˜‚ğ—»ğ˜ ğ—–ğ—¿ğ—²ğ—®ğ˜ğ—²ğ—± ğ—¦ğ˜‚ğ—°ğ—°ğ—²ğ˜€ğ˜€ğ—³ğ˜‚ğ—¹ğ—¹ğ˜† âœ…

ğŸ‘¤ Name: ${account.name}
ğŸ“§ Email: ${account.email}
ğŸ” Password: ${account.password ? '--- ' + account.password + ' ---' : "N/A"}
ğŸ‚ Birthday: ${account.birthday || "N/A"}
ğŸš» Gender: ${account.gender || "N/A"}
ğŸ“© Note: ${account.message || "N/A"}

ğŸ’¡ Generated by Nobita Bot
`;

      return api.sendMessage(msg, event.threadID);
    } catch (error) {
      console.error("[fbcreate.js] Error:", error.message);
      return api.sendMessage("âŒ Error creating Facebook account. Try again later.", event.threadID);
    }
  }
};